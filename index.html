<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>🤖 Chatbot|Switch 1.0 ⚡</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Global box-sizing for consistent layout calculations */
        *, *::before, *::after {
            box-sizing: border-box;
        }

        /* Ensure html and body take full height to act as proper flex containers */
        html, body {
            height: 100%;
        }

        body {
            font-family: 'Inter', sans-serif; /* Matching portfolio font */
            background-color: #1a1d23; /* Primary background from portfolio */
            margin: 0;
            padding: 0;
            overflow-y: auto; 
            display: flex;
            flex-direction: column;
            color: #e0e0e0; /* Default text color from portfolio */
        }

        h1 {
            color: #4CAF50; /* Highlight color from portfolio */
            text-align: center;
            font-size: 24px;
            margin-bottom: 10px;
            padding-top: 20px;
            flex-shrink: 0;
            /* Refined Neon effect for H1 */
            filter: drop-shadow(0 0 5px rgba(76, 175, 80, 0.8)) drop-shadow(0 0 15px rgba(76, 175, 80, 0.4));
            animation: pulse-h1 2s infinite alternate; /* Subtle pulse */
        }

        @keyframes pulse-h1 {
            from { filter: drop-shadow(0 0 5px rgba(76, 175, 80, 0.8)) drop-shadow(0 0 15px rgba(76, 175, 80, 0.4)); }
            to { filter: drop-shadow(0 0 8px rgba(76, 175, 80, 1)) drop_shadow(0 0 20px rgba(76, 175, 80, 0.6)); }
        }

        #chat-container {
            height: 60vh;
            width: 90%;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            overflow-y: auto;
            background-color: #1a1d23; /* Matches body background */
            box-shadow: 0 0 15px rgba(76, 175, 80, 0.1); /* Very subtle outer glow for container */
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(76, 175, 80, 0.08); /* Even subtler border */
        }

        /* Base style for all messages */
        .chat-message {
            padding: 12px; 
            border-radius: 10px; 
            margin-bottom: 10px; 
            max-width: 70%; 
            word-wrap: break-word; 
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out; 
            display: flex; /* Use flex to control content and copy button */
            flex-direction: column; 
            position: relative; /* For copy feedback positioning */
        }

        /* User message styles */
        .user-message {
            background-color: #4CAF50; /* Green from portfolio */
            color: #ffffff;
            align-self: flex-end; /* Align to the right */
            border-bottom-right-radius: 2px; /* Small tail on bottom-right */
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.4); /* Subtle user message glow */
        }

        /* Bot message styles */
        .bot-message {
            background-color: #2d3138; /* Secondary background from portfolio */
            color: #e0e0e0;
            align-self: flex-start; /* Align to the left */
            border-bottom-left-radius: 2px; /* Small tail on bottom-left */
            box-shadow: 0 0 5px rgba(76, 175, 80, 0.15); /* Subtle inner glow for bot message */
        }
        
        /* Loading message styles */
        .loading-message {
            background-color: #2d3138;
            color: #a0a0a0;
            align-self: flex-start;
            border-bottom-left-radius: 2px;
            animation: pulse-message 1.5s infinite ease-in-out alternate; /* Subtle pulse */
        }
        @keyframes pulse-message {
            from { box-shadow: 0 0 3px rgba(76, 175, 80, 0.1); }
            to { box-shadow: 0 0 8px rgba(76, 175, 80, 0.4); }
        }

        /* Error message styles */
        .error-message {
            background-color: #a02c2c; /* Slightly softer red for errors */
            color: #ffffff;
            align-self: flex-start;
            border-bottom-left-radius: 2px;
            box-shadow: 0 0 8px rgba(160, 44, 44, 0.6); /* Red glow for errors */
        }

        /* Hover effect for all message bubbles */
        .chat-message:hover {
            transform: translateY(-3px) scale(1.01); /* Lift and slight scale */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4), 0 0 20px rgba(76, 175, 80, 0.8); /* Stronger green glow on hover */
        }
        /* Specific hover for error messages to keep red glow */
        .error-message:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4), 0 0 20px rgba(160, 44, 44, 0.8); 
        }

        /* Styling for the copy button */
        .copy-btn {
            background-color: #3e8e41; /* Darker green, subtle */
            color: #fff;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.75em; /* Smaller font */
            cursor: pointer;
            margin-top: 8px; /* Space from message text */
            align-self: flex-end; /* Align copy button to the right within the message bubble */
            transition: background-color 0.2s ease, transform 0.1s ease;
            box-shadow: 0 0 5px rgba(76, 175, 80, 0.3); /* Subtle glow */
        }
        .copy-btn:hover {
            background-color: #4CAF50;
            transform: translateY(-1px);
            box-shadow: 0 0 8px rgba(76, 175, 80, 0.6); /* More prominent glow on hover */
        }
        .copy-btn:active {
            transform: translateY(0);
        }

        /* Styling for the copied feedback message */
        .copy-feedback {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 1.1em;
            z-index: 1000;
            opacity: 0;
            animation: fadeOut 1.5s forwards;
            box-shadow: 0 0 15px rgba(76, 175, 80, 0.6);
        }

        @keyframes fadeOut {
            0% { opacity: 1; transform: translate(-50%, -50%); }
            100% { opacity: 0; transform: translate(-50%, -70px); } /* Fades out and moves up */
        }

        #input-area {
            padding: 20px;
            background-color: #2d3138;
            border-top: 1px solid #444;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            width: 90%;
            max-width: 800px;
            margin: 0 auto;
            border-radius: 0 0 10px 10px;
            flex-shrink: 0;
            box-shadow: 0 0 15px rgba(76, 175, 80, 0.1); /* Subtle bottom glow */
        }

        #user-input {
            flex: 1;
            padding: 15px;
            border: 1px solid #444;
            border-radius: 10px;
            font-size: 18px;
            background-color: #1a1d23;
            color: #e0e0e0;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2); /* Initial subtle shadow */
            outline: none;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        #user-input:focus {
            border-color: #4CAF50;
            box-shadow: 0 0 10px #4CAF50, inset 0 0 5px rgba(76, 175, 80, 0.3); /* Neon border glow on focus */
        }

        #send-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            background-color: #4CAF50;
            color: #fff;
            cursor: pointer;
            font-size: 18px;
            box-shadow: 0 0 15px rgba(76, 175, 80, 0.5); /* Button glow */
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            position: relative; 
            overflow: hidden;
        }

        #send-btn:hover {
            background-color: #3e8e41;
            transform: translateY(-2px);
            box-shadow: 0 0 25px rgba(76, 175, 80, 0.8); /* Stronger glow on hover */
        }
        #send-btn:active {
            transform: translateY(0);
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.4);
        }

        /* Scrollbar styles matching the dark theme with neon touch */
        body::-webkit-scrollbar {
            width: 10px;
            background-color: #1a1d23;
        }

        body::-webkit-scrollbar-thumb {
            background-color: #4CAF50; /* Green thumb */
            border-radius: 10px;
            box-shadow: 0 0 5px rgba(76, 175, 80, 0.4); /* Subtle glow for thumb */
        }
        body::-webkit-scrollbar-track {
            background: #2d3138; /* Dark track */
        }

        #chat-container::-webkit-scrollbar {
            width: 10px;
            background-color: #1a1d23;
        }

        #chat-container::-webkit-scrollbar-thumb {
            background-color: #3e8e41; /* Slightly darker green for inner scrollbar */
            border-radius: 10px;
            box-shadow: 0 0 3px rgba(76, 175, 80, 0.2);
        }
        #chat-container::-webkit-scrollbar-track {
            background: #22252b; /* Dark track for inner scrollbar */
        }


        /* CSS for the enhanced typing animation */
        .typing-dots span {
            display: inline-block;
            opacity: 0;
            animation: bounce-dot 1.4s infinite;
        }

        .typing-dots span:nth-child(1) { animation-delay: 0s; }
        .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes bounce-dot {
            0%, 100% {
                opacity: 0;
                transform: translateY(0);
            }
            25% {
                opacity: 1;
                transform: translateY(-5px);
                text-shadow: 0 0 5px #4CAF50; /* Add glow to dots */
            }
            50% {
                opacity: 1;
                transform: translateY(0);
            }
            75% {
                opacity: 0;
            }
        }

        /* Responsive design */
        @media only screen and (max-width: 600px) {
            #chat-container, #input-area {
                width: 95%;
                padding: 15px;
            }
            #user-input {
                padding: 12px;
                font-size: 16px;
            }
            #send-btn {
                padding: 12px 20px;
                font-size: 16px;
            }
            #input-area {
                flex-direction: row;
                gap: 10px;
            }
            h1 {
                font-size: 20px; /* Adjust h1 size for smaller screens */
            }
            .chat-message {
                padding: 10px;
                font-size: 0.9em;
            }
        }

        @media only screen and (max-width: 400px) {
            #chat-container, #input-area {
                width: 98%;
                padding: 10px;
            }
            #user-input {
                padding: 10px;
                font-size: 14px;
            }
            #send-btn {
                padding: 10px 15px;
                font-size: 14px;
            }
            h1 {
                font-size: 18px; /* Further adjust h1 size for very small screens */
            }
        }

        /* New styles for the help menu */
        .help-menu-container {
            background-color: #22252b; /* Slightly lighter than chat background */
            border: 1px solid rgba(76, 175, 80, 0.2); /* Subtle green border */
            border-radius: 12px; /* Rounded corners */
            padding: 20px;
            margin-top: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3), 0 0 10px rgba(76, 175, 80, 0.2); /* Enhanced shadow with neon glow */
            font-family: 'Inter', sans-serif;
            color: #e0e0e0;
            max-width: 100%; /* Ensure it's responsive */
            overflow-x: auto; /* Allow horizontal scroll for very long lines if needed */
        }

        .help-menu-container h2 {
            color: #4CAF50;
            font-size: 20px;
            margin-top: 0;
            margin-bottom: 15px;
            text-align: center;
            filter: drop-shadow(0 0 4px rgba(76, 175, 80, 0.7)); /* Neon glow for heading */
        }

        .help-menu-container p {
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .help-menu-container ul {
            list-style: none; /* Remove default bullet points */
            padding: 0;
            margin: 0;
        }

        .help-menu-container li {
            background-color: #1a1d23; /* Darker background for each list item */
            margin-bottom: 8px;
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid rgba(76, 175, 80, 0.1); /* Very subtle border */
            box-shadow: inset 0 0 5px rgba(76, 175, 80, 0.05); /* Inner glow */
            transition: background-color 0.2s ease, transform 0.1s ease;
        }

        .help-menu-container li:hover {
            background-color: #2d3138; /* Slightly lighter on hover */
            transform: translateX(3px); /* Small slide effect on hover */
            box-shadow: inset 0 0 8px rgba(76, 175, 80, 0.2);
        }

        .help-menu-container li strong {
            color: #4CAF50; /* Highlight command names */
            font-weight: 700;
        }

        .help-menu-container li em {
            color: #a0a0a0; /* Grey out "In Development" */
            font-style: normal;
        }

        .help-menu-container li a {
            color: #64B5F6; /* Link color */
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .help-menu-container li a:hover {
            color: #2196F3; /* Darker blue on hover */
            text-decoration: underline;
        }

        .help-menu-container .syntax-note {
            font-size: 0.9em;
            text-align: center;
            margin-top: 20px;
            opacity: 0.8;
            color: #a0a0a0;
        }

        /* Footer Credits Styling */
        .credits-footer {
            margin-top: auto; /* Pushes footer to the bottom */
            padding: 15px;
            background-color: #2d3138; /* Matches input area background */
            color: #888;
            font-size: 0.8em;
            text-align: center;
            border-top: 1px solid #444;
            border-radius: 10px 10px 0 0; /* Rounded top corners */
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.1); /* Subtle shadow upwards */
            flex-shrink: 0;
        }

        .credits-footer a {
            color: #4CAF50; /* Green link color */
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .credits-footer a:hover {
            color: #3e8e41;
            text-decoration: underline;
        }

    </style>
</head>
<body>
    <h1>🤖 Chatbot|Switch 1.0 ⚡</h1>
    <div id="chat-container"></div>
    <div id="input-area"> <input type="text" id="user-input" placeholder="Ask me anything, or type /help...">
        <button id="send-btn">Send</button>
    </div>

    <!-- Credits Section Added Here -->
    <footer class="credits-footer">
        <p>&copy; 2024 Chatbot|Switch 1.0. Crafted with passion by <a href="https://github.com/MusaAbiodun" target="_blank">Musa Abiodun</a> and the H.A.P.E. Team. All rights reserved.</p>
    </footer>

    <script>
        // Get references to DOM elements - Made by Musa Abiodun and H.A.P.E. Team
        const chatContainer = document.getElementById('chat-container');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');

        // --- API Endpoints Configuration --- Made by Musa Abiodun and H.A.P.E. Team
        // Google Gemini API (now secondary fallback for AI)
        const GEMINI_API_ENDPOINT = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent"; 
        
        // Primary API set: giftedtech.web.id - Made by Musa Abiodun and H.A.P.E. Team
        const GIFTEDTECH_JOKE_API_ENDPOINT = "https://api.giftedtech.web.id/api/fun/jokes";
        const GIFTEDTECH_QUOTES_API_ENDPOINT = "https://api.giftedtech.web.id/api/fun/quotes";
        const GIFTEDTECH_ADVICE_API_ENDPOINT = "https://api.giftedtech.web.id/api/fun/advice";
        const GIFTEDTECH_LOVE_API_ENDPOINT = "https://api.giftedtech.web.id/api/fun/love";
        const GIFTEDTECH_FRIENDSHIP_API_ENDPOINT = "https://api.giftedtech.web.id/api/fun/friendship";
        const GIFTEDTECH_GRATITUDE_API_ENDPOINT = "https://api.giftedtech.web.id/api/fun/gratitude";
        const GIFTEDTECH_FANCY_API_ENDPOINT = "https://api.giftedtech.web.id/api/tools/fancy";
        const GIFTEDTECH_FANCYV2_API_ENDPOINT = "https://api.giftedtech.web.id/api/tools/fancyv2";

        // Secondary API set: apis.davidcyriltech.my.id (used for facts, pickuplines, altquotes, currencies, convert)
        const DAVIDCYRILTECH_FACTS_API_ENDPOINT = "https://apis.davidcyriltech.my.id/fact";
        const DAVIDCYRILTECH_PICKUPLINE_API_ENDPOINT = "https://apis.davidcyriltech.my.id/pickupline";
        const DAVIDCYILTECH_ALT_QUOTES_API_ENDPOINT = "https://apis.davidcyriltech.my.id/random/quotes";
        const DAVIDCYRILTECH_CURRENCY_CONVERTER_API_ENDPOINT = "https://apis.davidcyriltech.my.id/tools/convert";
        const DAVIDCYRILTECH_CURRENCIES_API_ENDPOINT = "https://apis.davidcyriltech.my.id/tools/currencies";
        
        // New primary AI endpoint as requested by the user: davidcyriltech.my.id/ai/gemini
        const DAVIDCYRILTECH_AI_GEMINI_ENDPOINT = "https://apis.davidcyriltech.my.id/ai/gemini";

        // --- API Keys Configuration --- Made by Musa Abiodun and H.A.P.E. Team
        const GEMINI_API_KEY = ""; // Canvas will inject this for Google APIs - No manual input needed.
        const GIFTEDTECH_API_KEY = "gifted"; // Explicit key for giftedtech.web.id APIs (non-AI ones)
        const DAVIDCYRILTECH_API_KEY = ""; // This key might be needed for other davidcyriltech.my.id APIs, but NOT for davidcyriltech.my.id/ai/gemini

        /**
         * Utility function to copy text to clipboard and show feedback.
         * @param {string} text The text to copy.
         * @returns {void}
         * Made by Musa Abiodun and H.A.P.E. Team
         */
        function copyToClipboard(text) {
            const tempInput = document.createElement('textarea');
            tempInput.value = text;
            document.body.appendChild(tempInput);
            tempInput.select();
            try {
                document.execCommand('copy');
                const copyFeedback = document.createElement('span');
                copyFeedback.textContent = 'Copied!';
                copyFeedback.classList.add('copy-feedback');
                document.body.appendChild(copyFeedback);
                setTimeout(() => {
                    if (document.body.contains(copyFeedback)) {
                        document.body.removeChild(copyFeedback);
                    }
                }, 1500);
                console.log('Text copied to clipboard!');
            } catch (err) {
                console.error('Failed to copy text: ', err);
                displayMessage('bot', `Failed to copy text. Please copy manually: "${text}"`, 'error');
            } finally {
                if (document.body.contains(tempInput)) {
                    document.body.removeChild(tempInput);
                }
            }
        }

        /**
         * Function to display messages in the chat container with dynamic styling.
         * @param {string} sender - 'user' or 'bot'.
         * @param {string} text - The message content.
         * @param {string} [type='bot'] - 'bot', 'loading', or 'error' for styling.
         * @param {boolean} [isHTML=false] - True if 'text' contains HTML, false for plain text.
         * Made by Musa Abiodun and H.A.P.E. Team
         */
        function displayMessage(sender, text, type = 'bot', isHTML = false) { 
            const messageDiv = document.createElement("div");
            messageDiv.classList.add('chat-message');

            const innerContentDiv = document.createElement('div');
            innerContentDiv.classList.add('message-content');

            if (sender === 'user') {
                messageDiv.classList.add('user-message');
                innerContentDiv.textContent = text;
            } else { // Bot messages (including loading and error)
                messageDiv.classList.add('bot-message');
                
                if (type === 'loading') {
                    messageDiv.classList.add('loading-message');
                    innerContentDiv.innerHTML = text; // Typing dots are HTML
                } else if (type === 'error') {
                    messageDiv.classList.add('error-message');
                    innerContentDiv.textContent = text; // Error message is plain text
                } else {
                    // Regular bot response: use isHTML flag
                    if (isHTML) {
                        innerContentDiv.innerHTML = text; // Render HTML
                    } else {
                        innerContentDiv.textContent = text; // Render plain text
                    }
                }

                // Add copy button for bot messages that are not loading - Made by Musa Abiodun and H.A.P.E. Team
                if (type !== 'loading') {
                    const copyBtn = document.createElement('button');
                    copyBtn.textContent = 'Copy';
                    copyBtn.classList.add('copy-btn');
                    
                    // Get the plain text content from the innerContentDiv for copying.
                    copyBtn.onclick = () => copyToClipboard(innerContentDiv.textContent);
                    messageDiv.appendChild(copyBtn); // Append the button to the message div
                }
            }
            
            messageDiv.prepend(innerContentDiv);
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        /**
         * Safely calculates a mathematical expression to prevent code injection.
         * @param {string} expression The mathematical expression to calculate.
         * @returns {number} The result of the calculation.
         * @throws {Error} If the expression contains invalid characters or cannot be evaluated.
         * Made by Musa Abiodun and H.A.P.E. Team
         */
        function safeCalculate(expression) {
            // Basic validation: allow only numbers, operators (+, -, *, /, ., parentheses), and spaces.
            if (!/^[0-9+\-*/.\s()]+$/.test(expression)) {
                throw new Error('Invalid characters in calculation. Only numbers and basic operators are allowed.');
            }
            try {
                // Using the Function constructor is safer than global eval() as it runs in its own scope.
                return new Function('return ' + expression)();
            } catch (e) {
                throw new Error('Could not evaluate expression. Please check syntax.');
            }
        }

        /**
         * Formats raw AI response text (Markdown-like) into HTML with paragraphs, lists, and bolding.
         * @param {string} rawText The raw text response from the AI API.
         * @returns {string} The formatted HTML string.
         * Made by Musa Abiodun and H.A.P.E. Team
         */
        function formatAiResponse(rawText) {
            let processedText = rawText.trim().replace(/\r\n/g, '\n').replace(/\r/g, '\n');
            processedText = processedText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>'); // Bold text with **text**

            const lines = processedText.split('\n');
            let htmlOutput = [];
            let inList = false;

            lines.forEach(line => {
                const trimmedLine = line.trim();
                if (trimmedLine === '') {
                    if (inList) {
                        htmlOutput.push('</ul>');
                        inList = false;
                    }
                    return;
                }

                if (trimmedLine.startsWith('- ')) {
                    if (!inList) {
                        htmlOutput.push('<ul>');
                        inList = true;
                    }
                    htmlOutput.push(`<li>${trimmedLine.substring(2).trim()}</li>`);
                } else {
                    if (inList) {
                        htmlOutput.push('</ul>');
                        inList = false;
                    }
                    htmlOutput.push(`<p>${trimmedLine}</p>`);
                }
            });

            if (inList) {
                htmlOutput.push('</ul>');
            }
            return htmlOutput.join('');
        }

        // --- API Response Parsers for giftedtech.web.id --- Made by Musa Abiodun and H.A.P.E. Team
        const parseGiftedTechJoke = (data) => {
            if (data.result && data.result.setup && data.result.punchline) {
                return `${data.result.setup} -- ${data.result.punchline}`;
            } else if (typeof data.result === 'string') { // Added to handle direct string in result
                return data.result;
            } else if (data.result && data.result.joke) {
                return data.result.joke;
            }
            return `Unexpected joke format from GiftedTech. Raw: ${JSON.stringify(data)}`;
        };
        const parseGiftedTechQuote = (data) => {
            // Check if data.result is directly the quote string
            if (typeof data.result === 'string') {
                return data.result;
            }
            // Otherwise, check for quote and author properties
            if (data.result && data.result.quote && data.result.author) {
                return `"${data.result.quote}" - ${data.result.author}`;
            }
            return `Unexpected quote format from GiftedTech. Raw: ${JSON.stringify(data)}`;
        };
        const parseGiftedTechAdvice = (data) => {
            if (typeof data.result === 'string') { // Added to handle direct string in result
                return data.result;
            }
            return data.result && data.result.advice ? data.result.advice : `Unexpected advice format from GiftedTech. Raw: ${JSON.stringify(data)}`;
        };
        const parseGiftedTechLove = (data) => {
            if (typeof data.result === 'string') { // Added to handle direct string in result
                return data.result;
            }
            return data.result && data.result.love ? data.result.love : `Unexpected love quote format from GiftedTech. Raw: ${JSON.stringify(data)}`;
        };
        const parseGiftedTechFriendship = (data) => {
            if (typeof data.result === 'string') { // Added to handle direct string in result
                return data.result;
            }
            return data.result && data.result.friendship ? data.result.friendship : `Unexpected friendship quote format from GiftedTech. Raw: ${JSON.stringify(data)}`;
        };
        const parseGiftedTechGratitude = (data) => {
            if (typeof data.result === 'string') { // Added to handle direct string in result
                return data.result;
            }
            return data.result && data.result.gratitude ? data.result.gratitude : `Unexpected gratitude quote format from GiftedTech. Raw: ${JSON.stringify(data)}`;
        };
        const parseGiftedTechFancy = (data) => data.fancyText ? data.fancyText : `Unexpected fancy text format from GiftedTech. Raw: ${JSON.stringify(data)}`;

        // --- API Response Parsers for apis.davidcyriltech.my.id --- Made by Musa Abiodun and H.A.P.E. Team
        const parseDavidCyrilTechFact = (data) => {
            if (data.response && data.response.fact) {
                return data.response.fact;
            }
            if (data.fact) {
                return data.fact;
            }
            return `Unexpected fact format from DavidCyrilTech. Raw: ${JSON.stringify(data)}`;
        };
        const parseDavidCyrilTechPickupline = (data) => {
            if (data.response && data.response.pickupline) {
                return data.response.pickupline;
            }
            if (data.pickupline) {
                return data.pickupline;
            }
            return `Unexpected pickupline format from DavidCyrilTech. Raw: ${JSON.stringify(data)}`;
        };
        const parseDavidCyrilTechAltQuote = (data) => {
            // Check if the quote is nested under data.response
            if (data.response && data.response.quote) {
                const author = data.response.author ? `- ${data.response.author}` : '';
                return `"${data.response.quote}" ${author}`;
            }
            // Fallback to checking data.quote directly if the above fails (for consistency with other APIs)
            if (data.quote) {
                return `"${data.quote}"`;
            }
            return `Unexpected quotes format from DavidCyrilTech. Raw: ${JSON.stringify(data)}`;
        };
        
        // parseDavidCyrilTechTechNews is now deprecated in favor of AI summary for /technews

        const parseDavidCyrilTechCurrencies = (data) => {
            // First check for currencies string within a 'response' object
            if (data.response && data.response.currencies && typeof data.response.currencies === 'string') {
                let currenciesString = data.response.currencies;
                currenciesString = currenciesString.replace(/creator:[\s\w]+,?\s*|success:(true|false),?\s*|currencies:[\s\w]+,?\s*/gi, '').trim();
                const currencyCodes = currenciesString.split(',').map(code => code.trim()).filter(code => code);
                const displayLimit = 20;
                const currenciesHtml = currencyCodes.slice(0, displayLimit).map(code => `<strong>${code}</strong>`).join(', ');
                if (currenciesHtml) {
                    return `Available Currencies (partial list):<br>${currenciesHtml}<br><em>(For full list, use their API directly.)</em>`;
                }
            }
            // Fallback to checking for currencies string directly at the top level
            if (data.currencies && typeof data.currencies === 'object' && Object.keys(data.currencies).length > 0) { // Changed to object check based on previous correction
                 const currenciesList = Object.entries(data.currencies).slice(0, 20).map(([code, name]) => `<strong>${code}</strong>: ${name}`).join('<br>');
                 if (currenciesList) {
                     return `Available Currencies (partial list):<br>${currenciesList}<br><em>(For full list, use their API directly.)</em>`;
                 }
            }
            return `Could not retrieve currencies or unexpected format from DavidCyrilTech. Raw: ${JSON.stringify(data)}`;
        };

        const parseDavidCyrilTechCurrencyConvert = (data, userQuery) => {
            const match = userQuery.match(/(\d+(?:\.\d+)?)\s*([a-zA-Z]{3})\s+to\s+([a-zA-Z]{3})/i);
            let amount = data.amount || (match ? parseFloat(match[1]) : 'N/A');
            let from = data.from || (match ? match[2].toUpperCase() : 'N/A');
            let to = data.to || (match ? match[3].toUpperCase() : 'N/A');

            if (data.convertedAmount !== undefined) {
                return `${amount} ${from} is approximately <strong>${data.convertedAmount.toFixed(2)} ${to}</strong>.`;
            }
            return `Could not perform currency conversion. Response: ${JSON.stringify(data)}`;
        };

        /**
         * Parses the AI response structure and formats it.
         * Added handling for `data.message` string from new primary AI endpoint.
         * @param {Object} data - The raw data object from the AI API response.
         * @returns {string} The formatted AI response as an HTML string.
         * Made by Musa Abiodun and H.A.P.E. Team
         */
        const parseAiResponse = (data) => {
            if (data.message && typeof data.message === 'string') { // CHECK FOR data.message FIRST
                return formatAiResponse(data.message);
            } else if (data.candidates && data.candidates.length > 0 &&
                data.candidates[0].content && data.candidates[0].content.parts &&
                data.candidates[0].content.parts.length > 0) {
                return formatAiResponse(data.candidates[0].content.parts[0].text);
            } else if (data.response && typeof data.response === 'string') {
                return formatAiResponse(data.response);
            } else if (typeof data.result === 'string') { // Fallback for APIs like davidcyriltech.my.id/ai/gemini
                return formatAiResponse(data.result);
            }
            return `I received an empty or unreadable AI response. Raw: ${JSON.stringify(data)}`;
        };


        /**
         * Generic function to fetch content from an API.
         * Now explicitly handles davidcyriltech.my.id/ai/gemini as primary AI.
         * @param {Object} primaryConfig Configuration for the primary API: { endpoint, apiKey, queryParam, parser }
         * @param {Object} [secondaryConfig] Configuration for the secondary API: { endpoint, apiKey, queryParam, parser } (NOTE: used for Gemini fallback)
         * @param {string} loadingText The text to display while fetching. Emojis added by Musa Abiodun and H.A.P.E. Team.
         * @param {string} [userQuery=''] The actual query text from the user (for parsers that need it).
         * @returns {Promise<void>}
         * Made by Musa Abiodun and H.A.P.E. Team
         */
        async function fetchAPIContentWithFallback(primaryConfig, secondaryConfig, loadingText, userQuery = '') {
            const loadingMessageDiv = document.createElement("div");
            loadingMessageDiv.classList.add('chat-message', 'loading-message');
            const innerLoadingContentDiv = document.createElement('div');
            innerLoadingContentDiv.classList.add('message-content');
            innerLoadingContentDiv.innerHTML = `${loadingText}<span class="typing-dots"><span>.</span><span>.</span><span>.</span></span>`;
            loadingMessageDiv.appendChild(innerLoadingContentDiv);
            
            chatContainer.appendChild(loadingMessageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;

            let finalContentText = "Sorry, I couldn't fetch content right now. Please try again later. 😔";
            let fetchedSuccessfully = false;

            const fetchAndParse = async (config) => { 
                let url = config.endpoint;
                const currentQueryParams = new URLSearchParams();
                let fetchOptions = {};

                // Specific handling for DAVIDCYRILTECH_AI_GEMINI_ENDPOINT (primary AI)
                if (config.endpoint === DAVIDCYRILTECH_AI_GEMINI_ENDPOINT) {
                    currentQueryParams.append('text', encodeURIComponent(userQuery)); // Uses 'text' parameter
                    // No API key appended for this specific endpoint as per user request
                    fetchOptions.method = 'GET'; // This API uses GET
                } else if (config.endpoint === GEMINI_API_ENDPOINT) {
                    // Google Gemini API (fallback AI) uses POST
                    // Canvas handles GEMINI_API_KEY injection, no explicit appending here is needed
                    fetchOptions.method = 'POST';
                    fetchOptions.headers = { 'Content-Type': 'application/json' };
                    fetchOptions.body = JSON.stringify({ contents: [{ role: "user", parts: [{ text: userQuery }] }] });
                } else {
                    // All other general APIs (GiftedTech non-AI, DavidCyrilTech non-AI)
                    if (config.apiKey) { // For these APIs, use the apiKey from their specific config
                        currentQueryParams.append('apikey', config.apiKey);
                    }
                    if (config.queryParam && userQuery) {
                        currentQueryParams.append(config.queryParam, encodeURIComponent(userQuery));
                    }
                    fetchOptions.method = 'GET';
                }

                // Append all collected query parameters to the URL
                if (currentQueryParams.toString()) {
                    url += `?${currentQueryParams.toString()}`;
                }

                const response = await fetch(url, fetchOptions);
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({})); 
                    const errorMsg = errorData.message || `${response.status} ${response.statusText}`;
                    throw new Error(`API failed: ${errorMsg}`); // Simplified error message
                }
                const data = await response.json();
                console.log(`API response from ${config.endpoint}:`, data);
                return config.parser(data, userQuery);
            };

            try {
                // Always try primary config first
                finalContentText = await fetchAndParse(primaryConfig);
                fetchedSuccessfully = true;
            } catch (primaryError) {
                console.warn(`Primary API Error (${primaryConfig.endpoint}): ${primaryError.message}`);
                if (secondaryConfig) {
                    try {
                        // Attempt fallback API if primary fails
                        finalContentText = await fetchAndParse(secondaryConfig);
                        fetchedSuccessfully = true;
                    } catch (secondaryError) {
                        console.error(`Secondary API Error (${secondaryConfig.endpoint}): ${secondaryError.message}`);
                        finalContentText = `Both primary and fallback APIs failed. Primary failed: ${primaryError.message}. Secondary failed: ${secondaryError.message} 😔`;
                    }
                } else {
                    finalContentText = `Failed to get a response from the AI. Error: ${primaryError.message} 😔`;
                }
            } finally {
                if (chatContainer.contains(loadingMessageDiv)) {
                    chatContainer.removeChild(loadingMessageDiv);
                }
                displayMessage('bot', finalContentText, fetchedSuccessfully ? 'bot' : 'error', true);
            }
        }

        // Predefined chatbot commands and their responses - Made by Musa Abiodun and H.A.P.E. Team
        const commands = [
            { command: "help", response: `
                <div class="help-menu-container">
                    <h2>⚡ Commands Protocol Activated ⚡</h2>
                    <p>Dive into the future with these functionalities:</p>
                    <ul>
                        <li><strong>/help</strong>: Access this data stream. 📚</li>
                        <li><strong>/about</strong>: Unveil bot specifications. 🤖</li>
                        <li><strong>/dev</strong>: Developer credits log. 💻</li>
                        <li><strong>/info</strong>: General system intelligence. 💡</li>
                        <li><strong>/socials</strong>: Connect on our networks. 🔗</li>
                        <li><strong>/joke</strong>: Retrieve a random humor byte. 😂</li>
                        <li><strong>/facts</strong>: Discover an interesting data point. 🤯</li>
                        <li><strong>/pickuplines</strong>: Access a charm algorithm. 😉</li>
                        <li><strong>/quotes</strong>: Download an inspirational data packet. 💡</li>
                        <li><strong>/altquotes</strong>: Retrieve an alternative inspirational data packet. 🌟</li>
                        <li><strong>/technews</strong>: Get the latest tech headlines. 📰</li>
                        <li><strong>/advice</strong>: Access a wisdom algorithm. 🧠</li>
                        <li><strong>/love</strong>: Generate a sentiment burst. ❤️</li>
                        <li><strong>/friend</strong>: Process a camaraderie encryption. 🤝</li>
                        <li><strong>/gratitude</strong>: Synthesize an appreciation sequence. 🙏</li>
                        <li><strong>/fancy [text]</strong>: Encode text with stylistic algorithms (v1). ✨ <em>(In Development)</em></li>
                        <li><strong>/fancy2 [text]</strong>: Encode text with stylistic algorithms (v2). 🌟 <em>(In Development)</em></li>
                        <li><strong>/currencies</strong>: List supported currency codes.💲</li>
                        <li><strong>/convert [amount] [from] [to]</strong>: Convert currency values (e.g., /convert 10 USD to EUR). 💱</li>
                        <li><strong>/quest1</strong>: Engage in coding exploration. 🌐</li>
                        <li><strong>/quest2</strong>: Initiate advanced programming protocols. 🚀</li>
                        <li><strong>/update</strong>: Check for system upgrades. ⬆️</li>
                        <li><strong>/theme</strong>: Adjust interface schematics. 🌈</li>
                        <li><strong>/reset</strong>: Reinitialize core processes. 🔄</li>
                        <li><strong>/no.game</strong>: Current recreational modules inactive. 🚫</li>
                        <li><strong>/ping</strong>: Network latency test. 📡</li>
                        <li><strong>/uptime</strong>: Display operational metrics. ⏰</li>
                        <li><strong>/api</strong>: Access API interface documentation. 📈</li>
                        <li><strong>/calculate [expression]</strong>: Compute complex algorithms. 🧮</li>
                        <li><strong>/clear</strong>: Purge chat log. 🗑️</li>
                    </ul>
                    <p class="syntax-note"><em>Syntax: Input commands with a preceding slash '/'.</em></p>
                </div>
            ` },
            { command: "about", response: "Switch 1.0 is a multipurpose online bot still in development with few inbuilt commands and integrated APIs. 🤖" },
            { command: "hi", response: "How are you doing today 😊" },
            { command: "what's up", response: "I'm good 👌" },
            { 
                command: "dev", 
                response: "Created By Musa Abiodun 🤝 Switch ™ and other members of the class of H.A.P.E 🎓💻. We're passionate about innovation and building cool stuff! 🚀" 
            },
            { command: "info", response: "Provides information and entertainment through various commands.📺" },
            { 
                command: "socials", 
                response: `
                    <p>✨ **Let's Connect!** 📲</p>
                    <ul>
                        <li><strong>WhatsApp</strong>: <a href="https://wa.me/2349068649046" target="_blank">+2349068649046</a> 📞</li>
                        <li><strong>Telegram</strong>: <a href="https://t.me/lost_and_off" target="_blank">@lost_and_off</a> ✉️</li>
                        <li><strong>Gmail</strong>: <a href="mailto:techxunlimited@gmail.com">techxunlimited@gmail.com</a> 📧</li>
                    </ul>
                    <p>_Feel free to reach out to our network coordinates!_ 🌐</p>
                ` 
            },
            { command: "quest1", response: "Explore the world of coding and discover new things. 🌐" },
            { command: "quest2", response: "Learn a new programming language and build something amazing. 💻" },
            { command: "update", response: "We're constantly updating and improving our chatbot. 🚀" },
            { command: "theme", response: "Our theme is to provide a user-friendly and interactive experience. 🌈" },
            { command: "reset", response: "Chatbot has been reset. 🔄" },
            { command: "no.game", response: "No game available at the moment.😔" },
            { command: "ping", response: "Pong! 🏓" },
            { command: "uptime", response: "Uptime: 24/7 ⏰" },
            { command: "api", response: "Our API is used to provide various services and functionalities. 📈" },
            {
                command: "evaluate",
                response: () => {
                    const score = Math.floor(Math.random() * 100) + 1;
                    const encouragingWords = [
                        "Keep going!",
                        "You're on the right track!",
                        "Excellent work!",
                        "Don't give up!",
                        "You're making progress!",
                        "Great effort!",
                        "Good job!",
                        "Stay motivated!",
                        "You're doing well!",
                        "Keep pushing forward!",
                    ];
                    const encouragingWord =
                        encouragingWords[Math.floor(Math.random() * encouragingWords.length)];
                    return `<p>Evaluation Score: ${score}/100</p><p>${encouragingWord}</p>`;
                },
            },
        ];

        // Event listener for the Send button click - Made by Musa Abiodun and H.A.P.E. Team
        sendBtn.addEventListener("click", async () => {
            const userInputValue = userInput.value.trim();
            if (userInputValue === "") return; // Do nothing if input is empty

            displayMessage('user', userInputValue); // Display user's message
            userInput.value = ""; // Clear input field
            chatContainer.scrollTop = chatContainer.scrollHeight; // Scroll to bottom

            const lowerCaseInput = userInputValue.toLowerCase();
            let commandHandled = false; // Flag to track if a command was processed

            // --- Explicit Commands (starting with '/') --- Made by Musa Abiodun and H.A.P.E. Team
            if (lowerCaseInput.startsWith('/')) {
                // Commands using GiftedTech API (primary) with DavidCyrilTech API (secondary/fallback)
                if (lowerCaseInput === "/joke") {
                    await fetchAPIContentWithFallback(
                        { endpoint: GIFTEDTECH_JOKE_API_ENDPOINT, apiKey: GIFTEDTECH_API_KEY, queryParam: null, parser: parseGiftedTechJoke },
                        null, 
                        "Fetching humor byte 😂"
                    );
                    commandHandled = true;
                } else if (lowerCaseInput === "/quotes") {
                    await fetchAPIContentWithFallback(
                        { endpoint: GIFTEDTECH_QUOTES_API_ENDPOINT, apiKey: GIFTEDTECH_API_KEY, queryParam: null, parser: parseGiftedTechQuote },
                        null, 
                        "Downloading inspirational data 💡"
                    );
                    commandHandled = true;
                } else if (lowerCaseInput === "/advice") {
                    await fetchAPIContentWithFallback(
                        { endpoint: GIFTEDTECH_ADVICE_API_ENDPOINT, apiKey: GIFTEDTECH_API_KEY, queryParam: null, parser: parseGiftedTechAdvice },
                        null, 
                        "Accessing wisdom algorithm 🧠"
                    );
                    commandHandled = true;
                } else if (lowerCaseInput === "/love") {
                    await fetchAPIContentWithFallback(
                        { endpoint: GIFTEDTECH_LOVE_API_ENDPOINT, apiKey: GIFTEDTECH_API_KEY, queryParam: null, parser: parseGiftedTechLove },
                        null, 
                        "Generating sentiment burst ❤️"
                    );
                    commandHandled = true;
                } else if (lowerCaseInput === "/friend") {
                    await fetchAPIContentWithFallback(
                        { endpoint: GIFTEDTECH_FRIENDSHIP_API_ENDPOINT, apiKey: GIFTEDTECH_API_KEY, queryParam: null, parser: parseGiftedTechFriendship },
                        null, 
                        "Processing camaraderie encryption 🤝"
                    );
                    commandHandled = true;
                } else if (lowerCaseInput === "/gratitude") {
                    await fetchAPIContentWithFallback(
                        { endpoint: GIFTEDTECH_GRATITUDE_API_ENDPOINT, apiKey: GIFTEDTECH_API_KEY, queryParam: null, parser: parseGiftedTechGratitude },
                        null, 
                        "Synthesizing appreciation sequence 🙏"
                    );
                    commandHandled = true;
                } 
                // DavidCyrilTech commands (as primary, no fallback for now)
                else if (lowerCaseInput === "/facts") {
                    await fetchAPIContentWithFallback(
                        { endpoint: DAVIDCYRILTECH_FACTS_API_ENDPOINT, apiKey: DAVIDCYRILTECH_API_KEY, queryParam: null, parser: parseDavidCyrilTechFact },
                        null,
                        "Discovering an interesting data point 🤯"
                    );
                    commandHandled = true;
                } else if (lowerCaseInput === "/pickuplines") {
                    await fetchAPIContentWithFallback(
                        { endpoint: DAVIDCYRILTECH_PICKUPLINE_API_ENDPOINT, apiKey: DAVIDCYRILTECH_API_KEY, queryParam: null, parser: parseDavidCyrilTechPickupline },
                        null,
                        "Accessing a charm algorithm 😉"
                    );
                    commandHandled = true;
                } else if (lowerCaseInput === "/altquotes") {
                    await fetchAPIContentWithFallback(
                        { endpoint: DAVIDCYILTECH_ALT_QUOTES_API_ENDPOINT, apiKey: DAVIDCYRILTECH_API_KEY, queryParam: null, parser: parseDavidCyrilTechAltQuote },
                        null,
                        "Retrieving an alternative inspirational data packet 🌟"
                    );
                    commandHandled = true;
                } else if (lowerCaseInput === "/technews") {
                    // Tech news now uses DAVIDCYRILTECH_AI_GEMINI_ENDPOINT as primary, Gemini as secondary
                    await fetchAPIContentWithFallback(
                        { endpoint: DAVIDCYRILTECH_AI_GEMINI_ENDPOINT, apiKey: null, queryParam: 'text', parser: parseAiResponse },
                        { endpoint: GEMINI_API_ENDPOINT, apiKey: GEMINI_API_KEY, queryParam: null, parser: parseAiResponse }, // Gemini as fallback
                        "Getting the latest tech headlines from AI 📰",
                        "Summarize the top 5 latest technology news headlines and provide a very brief description for each." // Prompt for the AI
                    );
                    // Add analysis after displaying tech news
                    displayMessage('bot', "There you go! Keeping up with the latest in tech can be quite exciting, don't you think? What caught your eye? ✨", 'bot');
                    commandHandled = true;
                } else if (lowerCaseInput === "/currencies") {
                    await fetchAPIContentWithFallback(
                        { endpoint: DAVIDCYRILTECH_CURRENCIES_API_ENDPOINT, apiKey: DAVIDCYRILTECH_API_KEY, queryParam: null, parser: parseDavidCyrilTechCurrencies },
                        null,
                        "Listing supported currency codes 💲"
                    );
                    commandHandled = true;
                } else if (lowerCaseInput.startsWith("/convert")) {
                    const convertQuery = userInputValue.substring("/convert".length).trim();
                    const match = convertQuery.match(/(\d+(?:\.\d+)?)\s*([a-zA-Z]{3})\s+to\s+([a-zA-Z]{3})/i);
                    if (match) {
                        const amount = match[1];
                        const from = match[2].toUpperCase();
                        const to = match[3].toUpperCase();
                        await fetchAPIContentWithFallback(
                            { endpoint: DAVIDCYRILTECH_CURRENCY_CONVERTER_API_ENDPOINT, apiKey: DAVIDCYRILTECH_API_KEY, queryParam: 'amount', parser: parseDavidCyrilTechCurrencyConvert },
                            null,
                            "Converting currency values 💱",
                            `amount=${amount}&from=${from}&to=${to}`
                        );
                    } else {
                        displayMessage('bot', `Invalid /convert format. Use: /convert [amount] [from] to [to] (e.g., /convert 10 USD to EUR). 💱`, 'error');
                    }
                    commandHandled = true;
                }
                // Commands that are currently "in development"
                else if (lowerCaseInput.startsWith("/fancy ")) {
                    displayMessage('bot', "This command is currently in development. Please check back later! ✨", 'bot', true);
                    commandHandled = true;
                } else if (lowerCaseInput.startsWith("/fancy2 ")) {
                    displayMessage('bot', "This command is currently in development. Please check back later! 🌟", 'bot', true);
                    commandHandled = true;
                } 
                // Other existing static commands
                else if (lowerCaseInput.startsWith("/calculate")) {
                    try {
                        const calculation = userInputValue.replace("/calculate ", "");
                        const result = safeCalculate(calculation);
                        displayMessage('bot', `Result: ${result} 🧮`, 'bot');
                    } catch (error) {
                        displayMessage('bot', `Error: ${error.message} 🤔`, 'error');
                    }
                    commandHandled = true;
                } else if (lowerCaseInput === "/clear") {
                    chatContainer.innerHTML = "";
                    displayMessage('bot', `Chat log purged. Ready for new interactions! ✨`, 'bot');
                    commandHandled = true;
                } else {
                    // Check other predefined commands (like help, about, dev, etc.) from the 'commands' array
                    const commandName = lowerCaseInput.substring(1); 
                    const command = commands.find((cmd) => cmd.command === commandName);
                    if (command) {
                        displayMessage(
                            'bot',
                            typeof command.response === "function" ? command.response() : command.response,
                            'bot',
                            true // Static commands provide HTML
                        );
                        commandHandled = true;
                    } else {
                        displayMessage('bot', `Sorry, I don't recognize the command '${userInputValue}'. Type /help for available commands. 😕`, 'error');
                        commandHandled = true;
                    }
                }
            }
            
            // --- Default to AI Query if no explicit command was handled and not a greeting ---
            if (!commandHandled) {
                // Check for general greetings
                if (lowerCaseInput.includes("hello") || lowerCaseInput.includes("hi") || lowerCaseInput.includes("hey")) {
                    displayMessage('bot', `How are you doing today 😊`, 'bot');
                } else {
                    // Send to AI by default
                    try {
                        // AI Queries now use DAVIDCYRILTECH_AI_GEMINI_ENDPOINT as primary, Gemini as secondary
                        await fetchAPIContentWithFallback(
                            { endpoint: DAVIDCYRILTECH_AI_GEMINI_ENDPOINT, apiKey: null, queryParam: 'text', parser: parseAiResponse },
                            { endpoint: GEMINI_API_ENDPOINT, apiKey: GEMINI_API_KEY, queryParam: null, parser: parseAiResponse }, // Gemini as fallback
                            "Thinking... 🤔", 
                            userInputValue
                        );

                    } catch (error) {
                        console.error("Error with AI query:", error);
                        // The fetchAPIContentWithFallback already handles display of error messages
                    }
                }
            }
        });

        // Event listener for Enter key press on the input field - Made by Musa Abiodun and H.A.P.E. Team
        userInput.addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                sendBtn.click(); // Trigger the send button click handler
            }
        });
    </script>
</body>
</html>

