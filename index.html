<!DOCTYPE html>
<html>
<head>
    <title>Chatbot</title>
    <style>
   body {
  font-family: Arial, sans-serif;
  background-color: #1a1d23;
  margin: 0;
  padding: 0;
  height: 100vh;
  display: flex;
  flex-direction: column;
}

#chat-container {
  flex: 1;
  width: 100%;
  padding: 20px;
  overflow-y: auto;
  background-color: #1a1d23;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
  border-radius: 10px 10px 0 0;
}

#chat-container div {
  padding: 10px;
  border-bottom: 1px solid #2d3138;
  color: #fff;
  transform-style: preserve-3d;
  transform: translateZ(0);
  transition: transform 0.2s ease-in-out;
}

#chat-container div:hover {
  transform: translateZ(10px);
  background-color: #2d3138;
}

#input-container {
  padding: 20px;
  background-color: #1a1d23;
  border-top: 1px solid #2d3138;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#user-input {
  width: 70%;
  padding: 15px;
  border: none;
  border-radius: 10px;
  font-size: 18px;
  background-color: #2d3138;
  color: #fff;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
}

#send-btn {
  width: 20%;
  padding: 15px;
  border: none;
  border-radius: 10px;
  background-color: #4CAF50;
  color: #fff;
  cursor: pointer;
  font-size: 18px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
}

#send-btn:hover {
  background-color: #3e8e41;
}

#chat-container::-webkit-scrollbar {
  width: 10px;
  background-color: #1a1d23;
}

#chat-container::-webkit-scrollbar-thumb {
  background-color: #2d3138;
  border-radius: 10px;
}

h1 {
  color: #fff;
  text-align: center;
  font-size: 24px;
  margin-bottom: 10px;
}

/* Responsive design */
@media only screen and (max-width: 600px) {
  #user-input {
    width: 60%;
  }
  #send-btn {
    width: 30%;
  }
}

@media only screen and (max-width: 400px) {
  #user-input {
    width: 55%;
    padding: 10px;
  }
  #send-btn {
    width: 35%;
    padding: 10px;
  }
}

    </style>
</head>
<body>
    <h1 style="text-align: center;">Chatbot</h1>
    <div id="chat-container"></div>
    <div style="text-align: center;">
        <input type="text" id="user-input" placeholder="Type a command...">
        <button id="send-btn">Send</button>
    </div>

    <script>
        const chatContainer = document.getElementById('chat-container');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');

        // Function to display messages in the chat container
        function displayMessage(sender, message) {
            const messageDiv = document.createElement('div');
            // Check if message is HTML (like from /help)
            if (message.includes('<p>') || message.includes('<br>')) {
                messageDiv.innerHTML = `${sender}: ${message}`;
            } else {
                messageDiv.textContent = `${sender}: ${message}`;
            }
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight; // Auto-scroll to bottom
        }

        // --- WARNING: DIRECT API KEY EXPOSURE ---
        // This is INSECURE for production. For educational/testing purposes only.
        // Replace with your actual OpenAI API key and ensure it's kept private.
        // If deploying, use a backend server to proxy requests.
        const OPENAI_API_KEY = "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";
        const OPENAI_API_URL = "https://api.openai.com/v1/chat/completions";
        // --- END WARNING ---


        const commands = [
            { command: "help", response: ` <p>Available commands: üìö</p> <p>1. /help: Displays this list of available commands and their descriptions. ü§î</p> <p>2. /about: This is a chatbot developed to demonstrate various features and functionalities. ü§ñ</p> <p>3. /dev: Developed by a team of passionate developers. üíª</p> <p>4. /info: Provides information and entertainment through various commands. üì∫</p> <p>5. /socials: You can find us on social media platforms: Twitter, Instagram, Facebook. üì±</p> <p>6. /joke: Why don't scientists trust atoms? Because they make up everything! üòÇ</p> <p>7. /quote: "Believe you can and you're halfway there." - Theodore Roosevelt üí°</p> <p>8. /quest1: Explore the world of coding and discover new things. üåê</p> <p>9. /quest2: Learn a new programming language and build something amazing. üíª</p> <p>10. /update: We're constantly updating and improving our chatbot. üöÄ</p> <p>11. /evaluate: Evaluates a prompt or idea based on creativity, clarity, relevance, and engagement. üìä</p> <p>12. /theme: Our theme is to provide a user-friendly and interactive experience. üåà</p> <p>13. /reset: Chatbot has been reset. üîÑ</p> <p>14. /no.game: No game available at the moment. üòî</p> <p>15. /ping: Pong! üèì</p> <p>16. /uptime: Uptime: 24/7 ‚è∞</p> <p>17. /api: Our API is used to provide various services and functionalities. üìà</p> <p>18. /calculate: Calculates mathematical expressions. üìä</p> <p>19. /clear: Clears the chat üóëÔ∏è</p> <p>20. /ai [your question]: Ask the AI any question! ‚ú®</p>` },
            { command: "about", response: "Switch 1.0 is a multipurpose online bot still in development with few inbuilt commands and integrated APIs. ü§ñ" },
            { command: "hi", response: "How are you doing today üòä" },
            { command: "what's up", response: "I'm good üëå" },
            { command: "dev", response: "Created By Musa Abiodun ü§ù Switch ‚Ñ¢ and other members of the class of H.A.P.E üéìüíª. We're passionate about innovation and building cool stuff! üöÄ" },
            { command: "info", response: "Provides information and entertainment through various commands. üì∫" },
            { command: "socials", response: "You can find us on social media platforms: Twitter, Instagram, Facebook. üì±" },
            { command: "joke", response: "Why don't scientists trust atoms? Because they make up everything! üòÇ" },
            { command: "quote", response: "\"Believe you can and you're halfway there.\" - Theodore Roosevelt üí°" },
            { command: "quest1", response: "Explore the world of coding and discover new things. üåê" },
            { command: "quest2", response: "Learn a new programming language and build something amazing. üíª" },
            { command: "update", response: "We're constantly updating and improving our chatbot. üöÄ" },
            { command: "theme", response: "Our theme is to provide a user-friendly and interactive experience. üåà" },
            { command: "reset", response: "Chatbot has been reset. üîÑ" },
            { command: "no.game", response: "No game available at the moment. üòî" },
            { command: "ping", response: "Pong! üèì" },
            { command: "uptime", response: "Uptime: 24/7 ‚è∞" },
            { command: "api", response: "Our API is used to provide various services and functionalities. üìà" },
            {
                command: "evaluate",
                response: () => {
                    const score = Math.floor(Math.random() * 100) + 1;
                    const encouragingWords = [
                        "Keep going!",
                        "You're on the right track!",
                        "Excellent work!",
                        "Don't give up!",
                        "You're making progress!",
                        "Great effort!",
                        "Good job!",
                        "Stay motivated!",
                        "You're doing well!",
                        "Keep pushing forward!",
                    ];
                    const encouragingWord =
                        encouragingWords[Math.floor(Math.random() * encouragingWords.length)];
                    return `<p>Evaluation Score: ${score}/100</p><p>${encouragingWord}</p>`;
                },
            },
        ];

        sendBtn.addEventListener("click", async () => { // Made async to handle fetch calls
            const userInputValue = userInput.value.trim();
            if (!userInputValue) return; // Ignore empty input

            displayMessage("You", userInputValue); // Display user's message

            if (userInputValue.toLowerCase().startsWith("/ai ")) {
                const query = userInputValue.substring(4).trim();
                if (!query) {
                    displayMessage("Bot", "Please provide a question after /ai. Example: /ai What is the capital of France?");
                    userInput.value = "";
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                    return;
                }

                displayMessage("Bot", "Thinking... ü§î"); // Indicate that the AI is processing
                try {
                    const response = await fetch(OPENAI_API_URL, {
                        method: "POST",
                        headers: {
                            "Authorization": `Bearer ${OPENAI_API_KEY}`,
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            "model": "gpt-3.5-turbo", // You can try "gpt-4" if you have access and want more advanced responses
                            "messages": [{"role": "user", "content": query}],
                            "max_tokens": 500, // Reduced max_tokens for quicker responses, adjust as needed
                            "temperature": 0.7 // Controls creativity, 0.7 is a good balance
                        })
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(`OpenAI API error: ${response.status} - ${errorData.error ? errorData.error.message : 'Unknown error'}`);
                    }

                    const data = await response.json();
                    if (data.choices && data.choices.length > 0 && data.choices[0].message && data.choices[0].message.content) {
                        displayMessage("Bot", data.choices[0].message.content);
                    } else {
                        displayMessage("Bot", "Couldn't get a valid response from AI. üòï");
                    }
                } catch (error) {
                    console.error("Error calling OpenAI API:", error);
                    displayMessage("Bot", `Error: ${error.message}. Please check the console for details. üòû`);
                }
            } else if (userInputValue.startsWith("/calculate")) {
                try {
                    const calculation = userInputValue.replace("/calculate ", "");
                    // Basic validation for eval (still not perfectly secure, but better than raw eval)
                    if (/^[0-9+\-*/().\s]+$/.test(calculation)) {
                        const result = eval(calculation);
                        displayMessage("Bot", `Result: ${result} üìä`);
                    } else {
                        displayMessage("Bot", `Error: Invalid calculation characters ü§î`);
                    }
                } catch (error) {
                    displayMessage("Bot", `Error: Invalid calculation ü§î`);
                }
            } else if (userInputValue.toLowerCase() === "/clear") {
                chatContainer.innerHTML = "";
            } else {
                const commandName = userInputValue.substring(1).toLowerCase();
                const command = commands.find((cmd) => cmd.command === commandName);
                if (command) {
                    const responseContent = typeof command.response === "function" ? command.response() : command.response;
                    displayMessage("Bot", responseContent);
                } else if (
                    userInputValue.toLowerCase().includes("hello") ||
                    userInputValue.toLowerCase().includes("hi") ||
                    userInputValue.toLowerCase().includes("hey")
                ) {
                    displayMessage("Bot", "üòä");
                } else {
                    displayMessage("Bot", "üòï");
                }
            }
            userInput.value = "";
            chatContainer.scrollTop = chatContainer.scrollHeight;
        });

        // Add support for "Enter" key press
        userInput.addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                sendBtn.click(); // Simulate a click on the send button
            }
        });
    </script>
</body>
</html>
